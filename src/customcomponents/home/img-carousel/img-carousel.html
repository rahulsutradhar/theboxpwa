<!-- Loading Native Components -->

<!-- Loading Custom Elements -->

<!-- Loading Mixins -->
<link rel="import" href="../home-mixins/caraousel-mixin.html">

<!-- Component Definition -->
<dom-module id="img-carousel">
  <template>
    <style>

    :host {
      display: block;
      position: relative;
      overflow: hidden;
    }

    div > ::slotted(:not([selected])) {
      display: none;
    }

    button {
      position: absolute;
      top: calc(50% - 20px);
      padding: 0;
      line-height: 40px;
      border: none;
      background: none;
      color: #DDD;
      font-size: 40px;
      font-weight: bold;
      opacity: 0.7;
    }

    button:hover,
    button:focus {
      opacity: 1;
    }

    #prevBtn {
      left: 12px;
    }

    #nextBtn {
      right: 12px;
    }

    button[disabled] {
      opacity: 0.4;
    }
    </style>

    <div>
      <slot></slot>
    </div>

    <button id="prevBtn" on-click="previous">&#x276E;</button>
    <button id="nextBtn" on-click="next">&#x276F;</button>

  </template>

    <script>
        // Extend Polymer.Element base class
        class ImgCarousel extends CaraouselMixin(Polymer.Element) {
          static get is() { return 'img-carousel' }
          connectedCallback() {
            super.connectedCallback();
          }


        //Setting properties and observers
        // static get properties() {
        //   return {
        //     selected: {
        //       type: Object,
        //       observer: '_selectedChanged'
        //     }
        //   };
        // }

        _selectedChanged(selected, oldSelected) {
          super._selectedChanged(selected, oldSelected);

          if (selected) {
            this.$.prevBtn.disabled = !selected.previousElementSibling;
            this.$.nextBtn.disabled = !selected.nextElementSibling;
          } else {
            this.$.prevBtn.disabled = true;
            this.$.nextBtn.disabled = true;
          }
        }

        //Component methods
        previous() {
          const elem = this.selected && this.selected.previousElementSibling;
          if (elem) {
            this.selected = elem;
          }
        }

        next() {
          const elem = this.selected && this.selected.nextElementSibling;
          if (elem) {
            this.selected = elem;
          }
        }


        // Reseting to first child if notihing is selected
        // _resetSelected() {
        //   if (!this.selected || this.selected.parentElement !== this) {
        //       this.selected = this.firstElementChild;
        //   }
        // }

        //This is called after initial properties are set.
        //It is called again when elements are added/refreshed
        // connectedCallback() {
        //   super.connectedCallback();
        //
        //   this.shadowRoot.addEventListener('slotchange', this._resetSelected.bind(this));
        //   this._resetSelected();
        // }

      }

      // Register custom element definition using standard platform API
      customElements.define(ImgCarousel.is, ImgCarousel);

  </script>

</dom-module>
